
document.addEventListener('DOMContentLoaded', function () {
  // Действия с карточками
  document.addEventListener("click", function (e) {
    var video = e.target.closest(".reelsCard__img");
    var favoriteBtn = e.target.closest(".reelsCard__buttonFavor");
    var moreBtn = e.target.closest(".reelsCard__buttonMore");
    if (video) {
      if (video.classList.contains("video-played")) {
        video.pause();
        video.classList.remove("video-played");
      } else {
        if (video.getAttribute("data-src") !== video.getAttribute("src")) {
          video.setAttribute("src", video.getAttribute("data-src"));
        }
        video.play();
        video.classList.add("video-played");
      }
    }
    if (favoriteBtn) {
      var _favoriteBtn$parentNo, _favoriteBtn$closest;
      var popupFavor = favoriteBtn === null || favoriteBtn === void 0 || (_favoriteBtn$parentNo = favoriteBtn.parentNode) === null || _favoriteBtn$parentNo === void 0 ? void 0 : _favoriteBtn$parentNo.querySelector(".reelsCard__popupFavor");
      var popupMore = favoriteBtn === null || favoriteBtn === void 0 || (_favoriteBtn$closest = favoriteBtn.closest(".reelsCard__icons")) === null || _favoriteBtn$closest === void 0 ? void 0 : _favoriteBtn$closest.querySelector(".reelsCard__popupMore");
      var card = favoriteBtn === null || favoriteBtn === void 0 ? void 0 : favoriteBtn.closest(".reelsCard");
      if (popupFavor.classList.contains("isOpen")) {
        popupFavor.classList.remove("isOpen");
        card.style.zIndex = 1;
      } else {
        var _popupFavor$getBoundi;
        var toLeft = (popupFavor === null || popupFavor === void 0 || (_popupFavor$getBoundi = popupFavor.getBoundingClientRect()) === null || _popupFavor$getBoundi === void 0 ? void 0 : _popupFavor$getBoundi.left) + 260 > document.documentElement.clientWidth;
        if (toLeft) {
          popupFavor.classList.add("isOpen", "toLeft");
        } else {
          popupFavor.classList.add("isOpen");
        }
        card.style.zIndex = 10;
        popupMore.classList.remove("isOpen");
      }
    }
    if (moreBtn) {
      var _moreBtn$parentNode, _moreBtn$closest;
      var _popupMore = moreBtn === null || moreBtn === void 0 || (_moreBtn$parentNode = moreBtn.parentNode) === null || _moreBtn$parentNode === void 0 ? void 0 : _moreBtn$parentNode.querySelector(".reelsCard__popupMore");
      var _popupFavor = moreBtn === null || moreBtn === void 0 || (_moreBtn$closest = moreBtn.closest(".reelsCard__icons")) === null || _moreBtn$closest === void 0 ? void 0 : _moreBtn$closest.querySelector(".reelsCard__popupFavor");
      var _card = moreBtn === null || moreBtn === void 0 ? void 0 : moreBtn.closest(".reelsCard");
      if (_popupMore !== null && _popupMore !== void 0 && _popupMore.classList.contains("isOpen")) {
        _popupMore.classList.remove("isOpen");
        _card.style.zIndex = 1;
      } else {
        var _popupMore$getBoundin;
        var _toLeft = (_popupMore === null || _popupMore === void 0 || (_popupMore$getBoundin = _popupMore.getBoundingClientRect()) === null || _popupMore$getBoundin === void 0 ? void 0 : _popupMore$getBoundin.left) + 260 > document.documentElement.clientWidth;
        if (_toLeft) {
          _popupMore === null || _popupMore === void 0 || _popupMore.classList.add("isOpen", "toLeft");
        } else {
          _popupMore === null || _popupMore === void 0 || _popupMore.classList.add("isOpen");
        }
        _card.style.zIndex = 10;
        _popupFavor === null || _popupFavor === void 0 || _popupFavor.classList.remove("isOpen");
      }
    }
  });
  document.addEventListener('click', function (event) {
    var cardFooter = event.target.closest(".reelsCard__footer");
    if (cardFooter) {
      event.preventDefault();
      var card = cardFooter === null || cardFooter === void 0 ? void 0 : cardFooter.closest(".reelsCard");
      var tagName = card.querySelector(".reelsCard__link").innerText;
      var subscribersCount = card.querySelector(".reelsCard__subscrs").getAttribute("data-sbscr");
      var publicationsCount = card.querySelector(".reelsCard__subscrs").getAttribute("data-publics");
      var followersCount = card.querySelector(".reelsCard__subscrs").getAttribute("data-followers");
      var playsCount = card.querySelector(".reelsCard__bottomElViews span").getAttribute("data-count");
      var playsLikes = card.querySelector(".reelsCard__bottomElLikes span").getAttribute("data-count");
      var playsComents = card.querySelector(".reelsCard__bottomElComments span").getAttribute("data-count");
      var playsShares = card.querySelector(".reelsCard__bottomElShares span").getAttribute("data-count");
      var subtext = card.querySelector(".reelsCard__descr").getAttribute("data-subText");
      var description = card.querySelector(".reelsCard__descr").getAttribute("data-text");
      var videoSrc = card.querySelector(".reelsCard__img").getAttribute("data-src");
      var modal = document.querySelector(".modal-reels");
      if (!modal) return;
      modal.querySelector(".modal-reels__userName").innerText = tagName;
      modal.querySelector(".modal-reels__countPulications p").innerText = publicationsCount;
      modal.querySelector(".modal-reels__countSubscribers p").innerText = subscribersCount;
      modal.querySelector(".modal-reels__countSubscriptions p").innerText = followersCount;
      modal.querySelector(".modal-reels__reelsCountViews span").innerText = playsCount;
      modal.querySelector(".modal-reels__reelsCountLikes span").innerText = playsLikes;
      modal.querySelector(".modal-reels__reelsCountComments span").innerText = playsComents;
      modal.querySelector(".modal-reels__reelsCountShares span").innerText = playsShares;
      modal.querySelector(".modal-reels__mainDescrTop").innerText = subtext;
      modal.querySelector(".modal-reels__mainDescrBottom").innerText = description;
      modal.querySelector(".reelsCard__img").setAttribute("src", videoSrc);
    }
  });
  document.addEventListener('click', function (event) {
    var popups = document.querySelectorAll('.reelsCard__iconWpFavor');
    popups.forEach(function (popup) {
      var popupEl = popup.querySelector('.reelsCard__popupFavor');
      if (!popupEl) return;
      // Проверяем, был ли клик вне текущей всплывашки
      if (!popup.contains(event.target) && popupEl.classList.contains("isOpen")) {
        popupEl.classList.remove('isOpen'); // Снимаем класс isOpen
        popup.closest(".reelsCard").style.zIndex = 1;
      }
    });
  });
  document.addEventListener('click', function (event) {
    var popups = document.querySelectorAll('.reelsCard__iconWpMore');
    popups.forEach(function (popup) {
      var popupEl = popup.querySelector('.reelsCard__popupMore');
      if (!popupEl) return;
      // Проверяем, был ли клик вне текущей всплывашки
      if (!popup.contains(event.target) && popupEl.classList.contains("isOpen")) {
        popupEl.classList.remove('isOpen'); // Снимаем класс isOpen
        popup.closest(".reelsCard").style.zIndex = 1;
      }
    });
  });
});
//# sourceMappingURL=scripts.min.js.map
